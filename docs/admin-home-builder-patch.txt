=== PATCH FOR AdminHomeBuilderPage.tsx ===

This file contains the changes needed to add the Template Selector feature.

## STEP 1: Add new imports (after line 7)

ADD AFTER:
import { useTheme } from '../hooks/useTheme';

NEW LINES:
import { useSettings } from '../contexts/SettingsContext';

AND AFTER:
import { HomeBuilderEntity
} from '@modules/content-management/home-builder/domain/entities/HomeBuilder';

NEW LINES:
import { LayoutStyle, LayoutTemplateFactory } from '@modules/content-management/home-builder/domain/entities/LayoutTemplates';

AND AFTER:
import { ComponentSettings } from '../components/HomeBuilder/ComponentSettings';

NEW LINES:
import { LayoutTemplateSelector } from '../components/HomeBuilder/LayoutTemplateSelector';


## STEP 2: Add settings hook and new state (after line 21)

ADD AFTER:
  const { isDarkMode } = useTheme();

NEW LINE:
  const { settings } = useSettings();

AND ADD NEW STATE VARIABLE AFTER line 33 (after showPageSettings):
  const [showTemplateSelector, setShowTemplateSelector] = useState(false);


## STEP 3: Add handleCreateFromTemplate function (add after handleCreateNewLayout around line 353)

  const handleCreateFromTemplate = async (style: LayoutStyle) => {
    try {
      const churchName = settings?.churchName || 'Nossa Igreja';
      const newLayout = LayoutTemplateFactory.createLayoutFromStyle(style, churchName);

      // Get template metadata for name
      const templates = LayoutTemplateFactory.getAllTemplates();
      const template = templates.find(t => t.style === style);

      newLayout.name = template?.name || `Layout ${style}`;
      newLayout.createdBy = currentUser?.email || 'unknown';
      newLayout.isActive = false;
      newLayout.isDefault = false;

      const createdLayout = await homeBuilderService.createLayout(newLayout);
      setCurrentLayout(createdLayout);
      setShowTemplateSelector(false);
      await loadData();
      alert(`‚úÖ Layout "${newLayout.name}" criado com sucesso!`);
    } catch (error) {
      console.error('Error creating layout from template:', error);
      alert('‚ùå Erro ao criar layout do template');
    }
  };


## STEP 4: Update handleCreateNewLayout button to show template selector

FIND (around line 1042-1048 in Layout Manager Modal):
              <button
                onClick={() => {
                  handleCreateNewLayout();
                  setShowLayoutManager(false);
                }}
                className="w-full mb-4 p-4 border-2 border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition-colors font-medium"
              >
                ‚ûï Criar Novo Layout
              </button>

REPLACE WITH:
              <div className="grid grid-cols-2 gap-4 mb-4">
                <button
                  onClick={() => {
                    setShowLayoutManager(false);
                    setShowTemplateSelector(true);
                  }}
                  className="p-4 border-2 border-dashed border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 transition-colors font-medium"
                >
                  üé® Criar de Template
                </button>
                <button
                  onClick={() => {
                    handleCreateNewLayout();
                    setShowLayoutManager(false);
                  }}
                  className="p-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors font-medium"
                >
                  ‚ûï Layout Vazio
                </button>
              </div>


## STEP 5: Add Template Selector Modal (add before the closing </div> at the end, around line 1128)

ADD BEFORE FINAL </div>:
      {/* Template Selector Modal */}
      {showTemplateSelector && (
        <LayoutTemplateSelector
          onSelect={handleCreateFromTemplate}
          onCancel={() => setShowTemplateSelector(false)}
        />
      )}


==== END OF PATCH ====
